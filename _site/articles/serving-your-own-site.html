<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="sysreqs">
<title>Serving your own site • sysreqs</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Serving your own site">
<meta property="og:description" content="sysreqs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sysreqs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/api-reference.html">API Reference</a>
    <a class="dropdown-item" href="../articles/serving-your-own-site.html">Serving your own site</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/josiahparry/r-sysreqs/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Serving your own site</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/josiahparry/r-sysreqs/blob/HEAD/vignettes/serving-your-own-site.Rmd" class="external-link"><code>vignettes/serving-your-own-site.Rmd</code></a></small>
      <div class="d-none name"><code>serving-your-own-site.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-sysreqs.josiahparry.com/" class="external-link">sysreqs</a></span><span class="op">)</span></code></pre></div>
<p>You may have the need to serve your own version of this site locally. If that is the case, you can do so quite easily. There are two steps to hosting your own version of the site/API. First, you must download the requisite json files and store them in their own directory. Second, you must serve them on a server. Since this is only plain-text, you can serve it on Netlify (my choice) or Github pages. sysreqs also provides a function for serving them locally.</p>
<div class="section level2">
<h2 id="create-the-directories">Create the directories<a class="anchor" aria-label="anchor" href="#create-the-directories"></a>
</h2>
<p>You can create your own directories using <code><a href="../reference/create_sysreqs_site.html">create_sysreqs_site()</a></code> and specifying the output directory.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">outdir</span> <span class="op">&lt;-</span> <span class="st">"_api"</span>
<span class="fu"><a href="../reference/create_sysreqs_site.html">create_sysreqs_site</a></span><span class="op">(</span><span class="va">outdir</span><span class="op">)</span></code></pre></div>
<p>Check the output directory.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">outdir</span><span class="op">)</span>
<span class="co">#&gt; [1] "index.html"    "patterns.json" "pkgs"          "rules"        </span>
<span class="co">#&gt; [5] "systems.json"</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="serve-the-site">Serve the site<a class="anchor" aria-label="anchor" href="#serve-the-site"></a>
</h2>
<p>We can serve the site locally using <code><a href="../reference/serve_sysreqs.html">serve_sysreqs()</a></code> and providing the directory containing the json files that we need. This will create an <code>httpuv</code> server that runs in the background.</p>
<p>By default this runs on <code>localhost:8080</code> you can change this by setting the <code>host</code> and <code>port</code> arguments your self.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/serve_sysreqs.html">serve_sysreqs</a></span><span class="op">(</span><span class="va">outdir</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> site being served at http://0.0.0.0:8080</span></code></pre></div>
<p>We can check if this is working by using <code>httr</code> to call the local server.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">httr</span><span class="fu">::</span><span class="fu"><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">GET</a></span><span class="op">(</span><span class="st">"http://localhost:8080/patterns.json"</span><span class="op">)</span>
<span class="co">#&gt; Response [http://localhost:8080/patterns.json]</span>
<span class="co">#&gt;   Date: 2022-04-05 18:57</span>
<span class="co">#&gt;   Status: 200</span>
<span class="co">#&gt;   Content-Type: application/json</span>
<span class="co">#&gt;   Size: 3.22 kB</span>
<span class="co">#&gt; {"apparmor":["\\bapparmor\\b","\\blibapparmor\\b"],"atk":["\\batk\\b"],"autom...</span></code></pre></div>
<p>Awesome! If we want to use this server for our <code><a href="../reference/get_pkg_sysreqs.html">get_pkg_sysreqs()</a></code> and other functions we need to change the environment variable <code>SYSREQS_URL</code>. By default it is set to .</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span><span class="st">"SYSREQS_URL"</span> <span class="op">=</span> <span class="st">"http://localhost:8080"</span><span class="op">)</span></code></pre></div>
<p>We can check if this is correct using the internal function <code>b_url()</code> which assigns the base url for http queries.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">sysreqs</span><span class="fu">:::</span><span class="fu">b_url</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "http://localhost:8080"</span></code></pre></div>
<p>Let’s now try out one of the package’s functions.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">sysreqs</span><span class="fu">::</span><span class="fu"><a href="../reference/fetch_systems.html">fetch_systems</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [[1]]$os</span>
<span class="co">#&gt; [1] "linux"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$distribution</span>
<span class="co">#&gt; [1] "ubuntu"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$versions</span>
<span class="co">#&gt; [[1]]$versions[[1]]</span>
<span class="co">#&gt; [1] "14.04"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$versions[[2]]</span>
<span class="co">#&gt; [1] "16.04"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$versions[[3]]</span>
<span class="co">#&gt; [1] "18.04"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$versions[[4]]</span>
<span class="co">#&gt; [1] "20.04"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; [[2]]$os</span>
<span class="co">#&gt; [1] "linux"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$distribution</span>
<span class="co">#&gt; [1] "centos"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$versions</span>
<span class="co">#&gt; [[2]]$versions[[1]]</span>
<span class="co">#&gt; [1] "6"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$versions[[2]]</span>
<span class="co">#&gt; [1] "7"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$versions[[3]]</span>
<span class="co">#&gt; [1] "8"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; [[3]]$os</span>
<span class="co">#&gt; [1] "linux"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]$distribution</span>
<span class="co">#&gt; [1] "redhat"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]$versions</span>
<span class="co">#&gt; [[3]]$versions[[1]]</span>
<span class="co">#&gt; [1] "6"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]$versions[[2]]</span>
<span class="co">#&gt; [1] "7"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]$versions[[3]]</span>
<span class="co">#&gt; [1] "8"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[4]]</span>
<span class="co">#&gt; [[4]]$os</span>
<span class="co">#&gt; [1] "linux"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[4]]$distribution</span>
<span class="co">#&gt; [1] "opensuse"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[4]]$versions</span>
<span class="co">#&gt; [[4]]$versions[[1]]</span>
<span class="co">#&gt; [1] "42.3"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[4]]$versions[[2]]</span>
<span class="co">#&gt; [1] "15.0"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[4]]$versions[[3]]</span>
<span class="co">#&gt; [1] "15.2"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[4]]$versions[[4]]</span>
<span class="co">#&gt; [1] "15.3"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[5]]</span>
<span class="co">#&gt; [[5]]$os</span>
<span class="co">#&gt; [1] "linux"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[5]]$distribution</span>
<span class="co">#&gt; [1] "sle"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[5]]$versions</span>
<span class="co">#&gt; [[5]]$versions[[1]]</span>
<span class="co">#&gt; [1] "12.3"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[5]]$versions[[2]]</span>
<span class="co">#&gt; [1] "15.0"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[5]]$versions[[3]]</span>
<span class="co">#&gt; [1] "15.2"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[5]]$versions[[4]]</span>
<span class="co">#&gt; [1] "15.3"</span></code></pre></div>
<p>Stop serving the site.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/stop_sysreqs.html">stop_sysreqs</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Josiah Parry.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
